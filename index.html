<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Drop by jdanilov</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Drop Framework</h1>
        <p>mvc / ioc microframework for Apache Flex <a href="https://github.com/jdanilov/drop">View the Project on GitHub</a></p>

        <ul>
          <li><a href="https://github.com/jdanilov/drop/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/jdanilov/drop/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/jdanilov/drop">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>
<a name="drop" class="anchor" href="#drop"><span class="octicon octicon-link"></span></a>Documentation</h1>

<p><img src="https://raw.github.com/jdanilov/drop/master/docs/logo.png" align="right">
Minimalistic, hybrid MVC / IoC micro-architecture framework for ActionScript on Apache Flex and AIR platforms.</p>

<p>Drop derives from PureMVC and aims to minimize implementation approach discordance, forcing to write bug-safe and consistent solutions with less boilerplate code, also introducing typed notification model and strong notion of <em>Separation of Concerns</em> concept.</p>

<p>Hybrid framework features:</p>

<ul>
<li>Inversion of Control micro-architecture based on ServiceLocator, called <code>Context</code>;</li>
<li>Model / View / Controller tiers coded in <code>Services</code> / <code>Mediators</code> / <code>Controller</code> classes respectively;</li>
<li>Strongly-typed notification &amp; delegation model based on Actor Interfaces.</li>
</ul><p>All the code samples below are taken from the <a href="https://github.com/jdanilov/drop/tree/master/drop-as3-example/src/main/flex">drop-as3-example</a> subproject found within the repository.</p>

<h2>
<a name="architecture" class="anchor" href="#architecture"><span class="octicon octicon-link"></span></a>Architecture</h2>

<p>In essence framework breaks down a system into independable classes called Actors, split into logical tiers (Model, View, Controller), each concerned with specific system aspect and communicating with other Actors via well-defined interfaces. All Actor instanes are stored in a single Service Locator object, called Context, that allows to resolve Actors by their interface.</p>

<p>Actors come in three types:</p>

<ul>
<li>Services (and Proxies) that represent Model layer,</li>
<li>Mediators that represent View layer,</li>
<li>Controllers that represent Controller layer.</li>
</ul><p>Actors are coded in independent, robust manner, following specific rules explained below.</p>

<h2>
<a name="anatomy" class="anchor" href="#anatomy"><span class="octicon octicon-link"></span></a>Anatomy</h2>

<p>Typical application / library written on drop framework has the following structure:</p>

<pre><code>org.dropframework.*    &gt; included framework sources
appname                &gt; application root
 L actors                &gt; root for internal communication interfaces (actors)
    L singletones          &gt; actor interfaces with single implementation: I&lt;...&gt;
    L notifications        &gt; actor interfaces with multiple implementation: IOn&lt;...&gt;
 L commons               &gt; root for all shared generic classes
    L components           &gt; shared generic components
    L utils                &gt; shared generic utility classes
 L controller            &gt; root for business logic controllers
 L model                 &gt; root for model classes
    L services             &gt; proxies, services, data access objects
    L vos                  &gt; value objects, entities, data transfer objects
 L view                   &gt; root for views and mediators
</code></pre>

<p>As explained below, application written on Drop consists of logic processing classes called Actors that control specific system aspects and communicate with each other via well-defined Interfaces.</p>

<h3>
<a name="the-appnameactors-directory" class="anchor" href="#the-appnameactors-directory"><span class="octicon octicon-link"></span></a>The appname/actors directory</h3>

<p>The <a href="https://github.com/jdanilov/drop/tree/master/drop-as3-example/src/main/flex/example/actors">appname/actors</a> directory usually contains a single <a href="https://github.com/jdanilov/drop/tree/master/drop-as3-example/src/main/flex/example/actors/GlobalContext.as">GlobalContext</a> class which serves as a ServiceLocator for resolving Actors, and the Actor communication interfaces themselves. Actor interfaces are split into two groups:</p>

<ul>
<li>
<strong>singletones</strong> - interfaces that start with <code>I&lt;...&gt;</code> name prefix and define API for managers, commands, workers, services of which there is a single implementation within the system.</li>
<li>
<strong>notifications</strong> - interfaces that start with <code>IOn&lt;...&gt;</code> name prefix and defined API for actors that listen for specific events or actions happening within the system.</li>
</ul><p>Example of Singletone interfaces:</p>

<ul>
<li>
<a href="https://github.com/jdanilov/drop/tree/master/drop-as3-example/src/main/flex/example/actors/singletones/ISheepHerdController.as">ISheepHerdController.as</a> </li>
<li>
<a href="https://github.com/jdanilov/drop/tree/master/drop-as3-example/src/main/flex/example/actors/singletones/IWeatherService.as">IWeatherService.as</a> </li>
</ul><p>And Notification interfaces:</p>

<ul>
<li><a href="https://github.com/jdanilov/drop/tree/master/drop-as3-example/src/main/flex/example/actors/notifications/IOnSheepCountChanged.as">IOnSheepCountChanged.as</a></li>
<li><a href="https://github.com/jdanilov/drop/tree/master/drop-as3-example/src/main/flex/example/actors/notifications/IOnWeatherChanged.as">IOnWeatherChanged.as</a></li>
</ul><h4>
<a name="actors-communication" class="anchor" href="#actors-communication"><span class="octicon octicon-link"></span></a>Actors communication</h4>

<p>Core idea is that <strong>Actors do not communicate directly</strong>, instead they resolve each other via <a href="https://github.com/jdanilov/drop/tree/master/drop-as3-example/src/main/flex/example/actors/GlobalContext.as">GlobalContext</a> by specific Actor interface defined in <code>appname/actors</code> package and then invoke required methods. Following <code>Context</code> methods can be used to resolve the Actors:</p>

<ul>
<li>
<code>.instanceOf (type : Class) : IConcernedActor</code> - finds one and only one Actor instance of the specified interface, fails with Error if more than 1 Actors found;</li>
<li>
<code>.arrayOf (type : Class) : Array</code> - finds an array of Actors for specified interface;</li>
<li>
<code>.invoke (type : Class, callback : Function) : void</code> - executes supplied callback function with every Actor of the specified interface as an argument. Handy for notifying multiple Actors.</li>
</ul><p>This approach aims to decouple the system components for better maintainability. This way, <code>appname/actors</code> directory serves as a collection of interfaces specifying the internal system mechanics.</p>

<p><strong>tip:</strong> Generally it is adviced to rely on notification interfaces versus singletone ones where possible as they allow for better loose coupling.</p>

<h3>
<a name="the-appnamecommons-directory" class="anchor" href="#the-appnamecommons-directory"><span class="octicon octicon-link"></span></a>The appname/commons directory</h3>

<p>The <a href="https://github.com/jdanilov/drop/tree/master/drop-as3-example/src/main/flex/example/commons">appname/commons</a> directory contains all components, abstractions, utilities and support modules that are:</p>

<ul>
<li>generic enough to be reused or means to be extended for the use;</li>
<li>do not handle any application business logic directrly.</li>
</ul><p>Directory content is rather custom, in case of Apache Flex application it is adviced to have a <code>components</code> sub package to contain all the shared and reusable components, and <code>utils</code> directory for various utilities.</p>

<p>Framework does not bundle any 3rd party utilities and components library. For utilities, such as those working with Objects, Strings, ByteArrays, Logging system etc. there are few good free options available, such as as3commons library that can found here: <a href="http://www.as3commons.org">http://www.as3commons.org</a>.</p>

<h3>
<a name="the-appnamecontroller-directory" class="anchor" href="#the-appnamecontroller-directory"><span class="octicon octicon-link"></span></a>The appname/controller directory</h3>

<p>Controllers are Actors that contain business logic and / or orchestrate other Actors such as Services and Mediators are stored in <a href="https://github.com/jdanilov/drop/tree/master/drop-as3-example/src/main/flex/example/controller">appname/controller</a> directory. Controllers include executable commands triggered directly or by notification, various system managers, complex execution sequences or aspect controllers.</p>

<p>Controllers decouple the complex business logic and facade that behind Actor interfaces, see the <a href="https://github.com/jdanilov/drop/tree/master/drop-as3-example/src/main/flex/example/controller/Shepherd.as">Shepherd.as</a>.</p>

<p>Notice the way notification broadcasted to every Actor implementing the <code>IOnSheepCountChanged</code> and <code>IOnDisasterHappened</code> interface using the <code>invoke</code> method:</p>

<div class="highlight"><pre><span class="nx">invoke</span><span class="p">(</span><span class="nx">IOnSheepCountChanged</span><span class="o">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span> <span class="o">:</span> <span class="nx">IOnSheepCountChanged</span><span class="p">)</span> <span class="o">:</span> <span class="nx">void</span>
        <span class="p">{</span> <span class="nx">a</span><span class="p">.</span><span class="nx">onSheepCountChanged</span><span class="p">(</span><span class="nx">_sheepCount</span><span class="p">);</span> <span class="p">});</span>
</pre></div>

<p>Every Controller automatically registers itself within the GlobalContext upon initialization.</p>

<p><strong>tip:</strong> Strictly, Controllers are not always required as Mediators and Services (see below) can and should contain application logic related to presentation and model layers. Use Controllers to decouple and manage the non-presentation and non-model related logic, control a system aspect or orchestrate other Actors via their interfaces.</p>

<h3>
<a name="the-appnamemodel-directory" class="anchor" href="#the-appnamemodel-directory"><span class="octicon octicon-link"></span></a>The appname/model directory</h3>

<p>Model layer is at heart of every application as it defines Domain Objects and Domain API and can be found in <a href="https://github.com/jdanilov/drop/tree/master/drop-as3-example/src/main/flex/example/model">appname/model</a> directory. Framework allows to follow various practices to define the Model, for instance applying a Domain Driven Development approach, but in core manages the two types of classes:</p>

<ul>
<li>
<strong>data access objects</strong> - found in <a href="https://github.com/jdanilov/drop/tree/master/drop-as3-example/src/main/flex/example/model/services">appname/model/services</a>, these are services, proxies, data stubs, remote endpoints etc. that provide a data feed for the application to present or means to control and modify the application data. Drop provides <code>Service</code> and <code>Proxy</code> basic Actor classes to represent those.</li>
<li>
<strong>data transfer objects</strong> - found in <a href="https://github.com/jdanilov/drop/tree/master/drop-as3-example/src/main/flex/example/model/vos">appname/model/vos</a>, these are value objects and entities that represent the Domain.</li>
</ul><p>No application business or presentation logic should be handled within the Model layer. Controllers and Mediators should be used instead.</p>

<p><a href="https://github.com/jdanilov/drop/tree/master/drop-as3-example/src/main/flex/example/model/services/WeatherService.as">WeatherService.as</a> is a Service example, and <a href="https://github.com/jdanilov/drop/tree/master/drop-as3-example/src/main/flex/example/model/vos/Weather.as">Weather.as</a> is a Value Object.</p>

<p><strong>tip:</strong> Services and Proxies may use direct response mechanics via IOn interface or indirect notification broadcasting via IOn interface, whichever preferred and consistent with an approach chosen by development team.</p>

<h3>
<a name="the-appnameview-directory" class="anchor" href="#the-appnameview-directory"><span class="octicon octicon-link"></span></a>The appname/view directory</h3>

<p>The <a href="https://github.com/jdanilov/drop/tree/master/drop-as3-example/src/main/flex/example/view">appname/view</a> directory is where the hierarchy of visual elements and containers defined. Classes there can be of 3 following types:</p>

<ul>
<li>
<strong>views</strong> - all visual display objects, controls and custom ui components that shown on a screen, usually coded in MXML, for example <code>MessagePanel.mxml</code>;</li>
<li>
<strong>skins</strong> - flex 4 skin classes used for applying layout and skinning parameters to the View components, for instance <code>MessagePanelSkin.as</code>;</li>
<li>
<strong>mediators</strong> - actors that listen to View Events dispatched by Views; control Views by modifying properties and data providers on them; serving as gateways to the rest of a system, including controllers, services and other Mediators. For example, <code>MessagePanelMediator.as</code>.</li>
</ul><p>General rule in defining Views is <strong>to keep each View as logic unaware and thin as possible, delegating all the business to Mediators</strong>. Views should know nothing on Mediators they're assigned to, be totally separate from the system, and may only:</p>

<ul>
<li>include other views;</li>
<li>broadcast events of special type <code>ViewEvent</code> caught by Mediators;</li>
<li>expose public methods to set properties or apply data providers.</li>
</ul><p>In turn, every Mediator must:</p>

<ul>
<li>perform a business logic only of a single View it is assigned to;</li>
<li>delegate non-View specific logic to other mediators, services or controllers responsible for it.</li>
</ul><h4>
<a name="viewevent-dispatching" class="anchor" href="#viewevent-dispatching"><span class="octicon octicon-link"></span></a>ViewEvent dispatching</h4>

<p>View Event dispatching can be seen in a <a href="https://github.com/jdanilov/drop/tree/master/drop-as3-example/src/main/flex/example/view/herd/HerdPanel.mxml">HerdPanel.mxml</a>:</p>

<div class="highlight"><pre><span class="o">&lt;</span><span class="nx">s</span><span class="o">:</span><span class="nx">Panel</span> <span class="nx">xmlns</span><span class="o">:</span><span class="nx">fx</span><span class="o">=</span><span class="s2">"http://ns.adobe.com/mxml/2009"</span>
         <span class="nx">xmlns</span><span class="o">:</span><span class="nx">s</span><span class="o">=</span><span class="s2">"library://ns.adobe.com/flex/spark"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">fx</span><span class="o">:</span><span class="nx">Script</span><span class="o">&gt;&lt;!</span><span class="p">[</span><span class="nx">CDATA</span><span class="p">[</span>
        <span class="kd">public</span> <span class="kd">static</span> <span class="kd">const</span> <span class="nx">A_ADD_SHEEP_CLICKED</span> <span class="o">:</span> <span class="nb">String</span>
               <span class="o">=</span> <span class="nx">ViewEvent</span><span class="p">.</span><span class="nx">uniqueName</span><span class="p">(</span><span class="s2">"A_ADD_SHEEP_CLICKED"</span><span class="p">);</span>

        <span class="kd">private</span> <span class="kd">function</span> <span class="nx">addSheepButton_clickHandler</span><span class="p">(</span><span class="nx">event</span><span class="o">:</span><span class="nb">MouseEvent</span><span class="p">)</span><span class="o">:</span><span class="nx">void</span>
        <span class="p">{</span>
            <span class="nx">dispatchEvent</span><span class="p">(</span><span class="nx">ViewEvent</span><span class="p">.</span><span class="nx">of</span><span class="p">(</span><span class="nx">A_ADD_SHEEP_CLICKED</span><span class="o">,</span> <span class="nx">event</span><span class="p">));</span>
        <span class="p">}</span>
    <span class="p">]]</span><span class="o">&gt;&lt;/</span><span class="nx">fx</span><span class="o">:</span><span class="nx">Script</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">s</span><span class="o">:</span><span class="nx">Button</span> <span class="nx">id</span><span class="o">=</span><span class="s2">"addSheepButton"</span> <span class="nx">label</span><span class="o">=</span><span class="s2">"Add Sheep"</span>
              <span class="nx">verticalCenter</span><span class="o">=</span><span class="s2">"0"</span> <span class="nx">horizontalCenter</span><span class="o">=</span><span class="s2">"0"</span>
              <span class="nx">click</span><span class="o">=</span><span class="s2">"addSheepButton_clickHandler(event)"</span><span class="o">/&gt;</span>
<span class="o">&lt;/</span><span class="nx">s</span><span class="o">:</span><span class="nx">Panel</span><span class="o">&gt;</span>
</pre></div>

<p>And listening in a <a href="https://github.com/jdanilov/drop/tree/master/drop-as3-example/src/main/flex/example/view/herd/HerdPanelMediator.as">HerdPanelMediator.mxml</a>:</p>

<div class="highlight"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nx">HerdPanelMediator</span>
        <span class="kd">extends</span> <span class="nx">Mediator</span>
<span class="p">{</span>
    <span class="kd">public</span> <span class="kd">function</span> <span class="nx">HerdPanelMediator</span><span class="p">(</span><span class="nx">view</span> <span class="o">:</span> <span class="nx">HerdPanel</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kd">super</span><span class="p">(</span><span class="nx">GlobalContext</span><span class="p">.</span><span class="nx">instance</span><span class="o">,</span> <span class="nx">view</span><span class="p">);</span>
        <span class="nx">adapter</span><span class="p">.</span><span class="nx">onActions</span><span class="p">(</span>
                <span class="p">[</span><span class="nx">HerdPanel</span><span class="p">.</span><span class="nx">A_ADD_SHEEP_CLICKED</span><span class="p">]</span><span class="o">,</span>
                <span class="kd">function</span> <span class="p">(</span><span class="nx">event</span> <span class="o">:</span> <span class="nx">ViewEvent</span><span class="p">)</span> <span class="o">:</span> <span class="nx">void</span>
                <span class="p">{</span>
                    <span class="nx">sheepHerdController</span><span class="p">.</span><span class="nx">addSheep</span><span class="p">();</span>
                <span class="p">});</span>
    <span class="p">}</span>

    <span class="kd">private</span> <span class="kd">function</span> <span class="kd">get</span> <span class="nx">sheepHerdController</span><span class="p">()</span> <span class="o">:</span> <span class="nx">ISheepHerdController</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nx">instanceOf</span><span class="p">(</span><span class="nx">ISheepHerdController</span><span class="p">)</span> <span class="nx">as</span> <span class="nx">ISheepHerdController</span><span class="o">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<h4>
<a name="listening-for-external-notifications" class="anchor" href="#listening-for-external-notifications"><span class="octicon octicon-link"></span></a>Listening for external notifications</h4>

<p><a href="https://github.com/jdanilov/drop/tree/master/drop-as3-example/src/main/flex/example/view/message/MessagePanel.mxml">MessagePanel.mxml</a> exposes <code>dataProvider</code> setter that applies message text to the label control:</p>

<div class="highlight"><pre><span class="o">&lt;?</span><span class="nx">xml</span> <span class="nx">version</span><span class="o">=</span><span class="s2">"1.0"</span><span class="o">?&gt;</span>
<span class="o">&lt;</span><span class="nx">s</span><span class="o">:</span><span class="nx">Panel</span> <span class="nx">xmlns</span><span class="o">:</span><span class="nx">fx</span><span class="o">=</span><span class="s2">"http://ns.adobe.com/mxml/2009"</span>
         <span class="nx">xmlns</span><span class="o">:</span><span class="nx">s</span><span class="o">=</span><span class="s2">"library://ns.adobe.com/flex/spark"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">fx</span><span class="o">:</span><span class="nx">Script</span><span class="o">&gt;</span>
        <span class="o">&lt;!</span><span class="p">[</span><span class="nx">CDATA</span><span class="p">[</span>
        <span class="kd">public</span> <span class="kd">function</span> <span class="kd">set</span> <span class="nx">dataProvider</span> <span class="p">(</span><span class="nx">label</span> <span class="o">:</span> <span class="nb">String</span><span class="p">)</span> <span class="o">:</span> <span class="nx">void</span>
        <span class="p">{</span>
            <span class="nx">statusLabel</span><span class="p">.</span><span class="nx">text</span> <span class="o">=</span> <span class="nx">label</span><span class="o">;</span>
        <span class="p">}</span>
        <span class="p">]]</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="nx">fx</span><span class="o">:</span><span class="nx">Script</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">s</span><span class="o">:</span><span class="nx">Label</span> <span class="nx">id</span><span class="o">=</span><span class="s2">"statusLabel"</span>
             <span class="nx">verticalCenter</span><span class="o">=</span><span class="s2">"0"</span> <span class="nx">horizontalCenter</span><span class="o">=</span><span class="s2">"0"</span><span class="o">/&gt;</span>
<span class="o">&lt;/</span><span class="nx">s</span><span class="o">:</span><span class="nx">Panel</span><span class="o">&gt;</span>
</pre></div>

<p><a href="https://github.com/jdanilov/drop/tree/master/drop-as3-example/src/main/flex/example/view/message/MessagePanelMediator.as">MessagePanelMediator.as</a> listens for <code>IOnSheepCountChanged</code> notification and applies <code>dataProvider</code> to the <code>MessagePanel</code> View:</p>

<div class="highlight"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nx">MessagePanelMediator</span>
    <span class="kd">extends</span> <span class="nx">Mediator</span>
    <span class="kd">implements</span> <span class="nx">IOnSheepCountChanged</span>
<span class="p">{</span>
    <span class="kd">public</span> <span class="kd">function</span> <span class="nx">MessagePanelMediator</span><span class="p">(</span><span class="nx">view</span> <span class="o">:</span> <span class="nx">MessagePanel</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kd">super</span><span class="p">(</span><span class="nx">GlobalContext</span><span class="p">.</span><span class="nx">instance</span><span class="o">,</span> <span class="nx">view</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kd">public</span> <span class="kd">function</span> <span class="nx">onSheepCountChanged</span><span class="p">(</span><span class="nx">sheepCount</span> <span class="o">:</span> <span class="nb">uint</span><span class="p">)</span> <span class="o">:</span> <span class="nx">void</span>
    <span class="p">{</span>
        <span class="nx">messagePanel</span><span class="p">.</span><span class="nx">dataProvider</span> <span class="o">=</span> <span class="p">(</span><span class="nx">sheepCount</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">?</span>
                <span class="s2">"Sheep herd has "</span> <span class="o">+</span> <span class="nx">sheepCount</span> <span class="o">+</span> <span class="s2">" sheeps"</span> <span class="o">:</span>
                <span class="s2">"Sheep herd is empty"</span><span class="o">;</span>
    <span class="p">}</span>

    <span class="kd">public</span> <span class="kd">function</span> <span class="nx">onDisasterHappened</span><span class="p">(</span><span class="nx">sheepCount</span> <span class="o">:</span> <span class="nb">uint</span><span class="o">,</span> <span class="nx">description</span> <span class="o">:</span> <span class="nb">String</span><span class="p">)</span> <span class="o">:</span> <span class="nx">void</span>
    <span class="p">{</span>
        <span class="nx">messagePanel</span><span class="p">.</span><span class="nx">dataProvider</span> <span class="o">=</span> <span class="nx">description</span><span class="o">;</span>
    <span class="p">}</span>

    <span class="kd">private</span> <span class="kd">function</span> <span class="kd">get</span> <span class="nx">messagePanel</span><span class="p">()</span> <span class="o">:</span> <span class="nx">MessagePanel</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="nx">adapter</span><span class="p">.</span><span class="nx">view</span> <span class="nx">as</span> <span class="nx">MessagePanel</span><span class="o">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<h2>
<a name="initialization" class="anchor" href="#initialization"><span class="octicon octicon-link"></span></a>Initialization</h2>

<p>Once <a href="https://github.com/jdanilov/drop/tree/master/drop-as3-example/src/main/flex/example/view/ExampleApplication.mxml">ApplicationView</a> created, an <a href="https://github.com/jdanilov/drop/tree/master/drop-as3-example/src/main/flex/example/view/ExampleApplicationMediator.as">ApplicationMediator</a> is initialized, which in turn creates all the system actors.</p>

<div class="highlight"><pre><span class="o">&lt;?</span><span class="nx">xml</span> <span class="nx">version</span><span class="o">=</span><span class="s2">"1.0"</span> <span class="nx">encoding</span><span class="o">=</span><span class="s2">"utf-8"</span><span class="o">?&gt;</span>
<span class="o">&lt;</span><span class="nx">s</span><span class="o">:</span><span class="nx">Application</span> <span class="nx">xmlns</span><span class="o">:</span><span class="nx">s</span><span class="o">=</span><span class="s2">"library://ns.adobe.com/flex/spark"</span>
               <span class="nx">xmlns</span><span class="o">:</span><span class="nx">fx</span><span class="o">=</span><span class="s2">"http://ns.adobe.com/mxml/2009"</span>
               <span class="nx">creationComplete</span><span class="o">=</span><span class="s2">"creationCompleteHandler(event)"</span><span class="o">&gt;</span>
    <span class="o">&lt;</span><span class="nx">fx</span><span class="o">:</span><span class="nx">Script</span><span class="o">&gt;&lt;!</span><span class="p">[</span><span class="nx">CDATA</span><span class="p">[</span>
        <span class="kd">import</span> <span class="nx">mx</span><span class="p">.</span><span class="nx">events</span><span class="p">.</span><span class="nx">FlexEvent</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">function</span> <span class="nx">creationCompleteHandler</span> <span class="p">(</span><span class="nx">event</span> <span class="o">:</span> <span class="nx">FlexEvent</span><span class="p">)</span> <span class="o">:</span> <span class="nx">void</span>
        <span class="p">{</span>
            <span class="k">new</span> <span class="nx">ExampleApplicationMediator</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">]]</span><span class="o">&gt;&lt;/</span><span class="nx">fx</span><span class="o">:</span><span class="nx">Script</span><span class="o">&gt;</span>
    <span class="o">&lt;!--</span> <span class="nx">view</span> <span class="nx">components</span> <span class="nx">here</span> <span class="p">...</span> <span class="o">--&gt;</span>
<span class="o">&lt;/</span><span class="nx">s</span><span class="o">:</span><span class="nx">Application</span><span class="o">&gt;</span>
</pre></div>

<p>And Application Mediator: </p>

<div class="highlight"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nx">ExampleApplicationMediator</span>
    <span class="kd">extends</span> <span class="nx">Mediator</span>
<span class="p">{</span>
    <span class="kd">public</span> <span class="kd">function</span> <span class="nx">ExampleApplicationMediator</span><span class="p">(</span><span class="nx">view</span> <span class="o">:</span> <span class="nx">ExampleApplication</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kd">super</span><span class="p">(</span><span class="nx">GlobalContext</span><span class="p">.</span><span class="nx">instance</span><span class="o">,</span> <span class="nx">view</span><span class="p">);</span>

        <span class="cm">/* initializing model layer */</span>
        <span class="k">new</span> <span class="nx">WeatherService</span><span class="p">();</span>

        <span class="cm">/* initializing controller layer */</span>
        <span class="k">new</span> <span class="nx">Shepherd</span><span class="p">();</span>

        <span class="cm">/* initializing mediators for included components */</span>
        <span class="k">new</span> <span class="nx">HerdPanelMediator</span><span class="p">(</span><span class="nx">view</span><span class="p">.</span><span class="nx">herdPanel</span><span class="p">);</span>
        <span class="k">new</span> <span class="nx">MessagePanelMediator</span><span class="p">(</span><span class="nx">view</span><span class="p">.</span><span class="nx">messagePanel</span><span class="p">);</span>

        <span class="cm">/* once actors initialized, sending the ready notification */</span>
        <span class="nx">invoke</span><span class="p">(</span><span class="nx">IOnApplicationReady</span><span class="o">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">a</span> <span class="o">:</span> <span class="nx">IOnApplicationReady</span><span class="p">)</span> <span class="o">:</span> <span class="nx">void</span>
                <span class="p">{</span> <span class="nx">a</span><span class="p">.</span><span class="nx">onApplicationReady</span><span class="p">();</span> <span class="p">});</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>Mediators initialization happens hierarchically with parent Mediators initializing Mediators for the child views.</p>

<p><strong>tip:</strong> Generally it is a good idea to dispatch IOnApplicationReady notification in a way shown above once all Actors created and execute all initial data retrieving, view preparing and internal processes launch within listeners in a safe manner, rather than in Actor contstructors.</p>

<h2>
<a name="how-to-use" class="anchor" href="#how-to-use"><span class="octicon octicon-link"></span></a>How to use</h2>

<ul>
<li>Get familiar with the framework structure by going through the simple drop-as3-example project.</li>
<li>Checkout and include the sources of a drop-as3 project.</li>
<li>Have fun playing, changing and creating!</li>
</ul><p>Drop is designed for modification and extension. For a particular project it might be decided to introduce additional or modified Actor types structure.</p>

<p>Whatever architecture is followed, it must be made sure every Actor is only concerned with the aspect it's type designed to handle, and the actors communicate in decoupled manner via well-defined communication interfaces.</p>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/jdanilov">jdanilov</a></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>
